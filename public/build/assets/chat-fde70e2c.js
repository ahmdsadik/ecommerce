import"./bootstrap-822913a1.js";function I(i){"@babel/helpers - typeof";return I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},I(i)}function a(i,s){if(!(i instanceof s))throw new TypeError("Cannot call a class as a function")}function E(i,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function c(i,s,t){return s&&E(i.prototype,s),t&&E(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function P(){return P=Object.assign||function(i){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},P.apply(this,arguments)}function u(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(s&&s.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),s&&x(i,s)}function k(i){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},k(i)}function x(i,s){return x=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n},x(i,s)}function $(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function B(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function H(i,s){if(s&&(typeof s=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B(i)}function l(i){var s=$();return function(){var n=k(i),e;if(s){var r=k(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return H(this,e)}}var S=function(){function i(){a(this,i)}return c(i,[{key:"listenForWhisper",value:function(t,n){return this.listen(".client-"+t,n)}},{key:"notification",value:function(t){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",t)}},{key:"stopListeningForWhisper",value:function(t,n){return this.stopListening(".client-"+t,n)}}]),i}(),N=function(){function i(s){a(this,i),this.namespace=s}return c(i,[{key:"format",value:function(t){return t.charAt(0)==="."||t.charAt(0)==="\\"?t.substr(1):(this.namespace&&(t=this.namespace+"."+t),t.replace(/\./g,"\\"))}},{key:"setNamespace",value:function(t){this.namespace=t}}]),i}(),g=function(i){u(t,i);var s=l(t);function t(n,e,r){var o;return a(this,t),o=s.call(this),o.name=e,o.pusher=n,o.options=r,o.eventFormatter=new N(o.options.namespace),o.subscribe(),o}return c(t,[{key:"subscribe",value:function(){this.subscription=this.pusher.subscribe(this.name)}},{key:"unsubscribe",value:function(){this.pusher.unsubscribe(this.name)}},{key:"listen",value:function(e,r){return this.on(this.eventFormatter.format(e),r),this}},{key:"listenToAll",value:function(e){var r=this;return this.subscription.bind_global(function(o,h){if(!o.startsWith("pusher:")){var v=r.options.namespace.replace(/\./g,"\\"),w=o.startsWith(v)?o.substring(v.length+1):"."+o;e(w,h)}}),this}},{key:"stopListening",value:function(e,r){return r?this.subscription.unbind(this.eventFormatter.format(e),r):this.subscription.unbind(this.eventFormatter.format(e)),this}},{key:"stopListeningToAll",value:function(e){return e?this.subscription.unbind_global(e):this.subscription.unbind_global(),this}},{key:"subscribed",value:function(e){return this.on("pusher:subscription_succeeded",function(){e()}),this}},{key:"error",value:function(e){return this.on("pusher:subscription_error",function(r){e(r)}),this}},{key:"on",value:function(e,r){return this.subscription.bind(e,r),this}}]),t}(S),M=function(i){u(t,i);var s=l(t);function t(){return a(this,t),s.apply(this,arguments)}return c(t,[{key:"whisper",value:function(e,r){return this.pusher.channels.channels[this.name].trigger("client-".concat(e),r),this}}]),t}(g),U=function(i){u(t,i);var s=l(t);function t(){return a(this,t),s.apply(this,arguments)}return c(t,[{key:"whisper",value:function(e,r){return this.pusher.channels.channels[this.name].trigger("client-".concat(e),r),this}}]),t}(g),D=function(i){u(t,i);var s=l(t);function t(){return a(this,t),s.apply(this,arguments)}return c(t,[{key:"here",value:function(e){return this.on("pusher:subscription_succeeded",function(r){e(Object.keys(r.members).map(function(o){return r.members[o]}))}),this}},{key:"joining",value:function(e){return this.on("pusher:member_added",function(r){e(r.info)}),this}},{key:"whisper",value:function(e,r){return this.pusher.channels.channels[this.name].trigger("client-".concat(e),r),this}},{key:"leaving",value:function(e){return this.on("pusher:member_removed",function(r){e(r.info)}),this}}]),t}(g),q=function(i){u(t,i);var s=l(t);function t(n,e,r){var o;return a(this,t),o=s.call(this),o.events={},o.listeners={},o.name=e,o.socket=n,o.options=r,o.eventFormatter=new N(o.options.namespace),o.subscribe(),o}return c(t,[{key:"subscribe",value:function(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"unsubscribe",value:function(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"listen",value:function(e,r){return this.on(this.eventFormatter.format(e),r),this}},{key:"stopListening",value:function(e,r){return this.unbindEvent(this.eventFormatter.format(e),r),this}},{key:"subscribed",value:function(e){return this.on("connect",function(r){e(r)}),this}},{key:"error",value:function(e){return this}},{key:"on",value:function(e,r){var o=this;return this.listeners[e]=this.listeners[e]||[],this.events[e]||(this.events[e]=function(h,v){o.name===h&&o.listeners[e]&&o.listeners[e].forEach(function(w){return w(v)})},this.socket.on(e,this.events[e])),this.listeners[e].push(r),this}},{key:"unbind",value:function(){var e=this;Object.keys(this.events).forEach(function(r){e.unbindEvent(r)})}},{key:"unbindEvent",value:function(e,r){this.listeners[e]=this.listeners[e]||[],r&&(this.listeners[e]=this.listeners[e].filter(function(o){return o!==r})),(!r||this.listeners[e].length===0)&&(this.events[e]&&(this.socket.removeListener(e,this.events[e]),delete this.events[e]),delete this.listeners[e])}}]),t}(S),F=function(i){u(t,i);var s=l(t);function t(){return a(this,t),s.apply(this,arguments)}return c(t,[{key:"whisper",value:function(e,r){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(e),data:r}),this}}]),t}(q),W=function(i){u(t,i);var s=l(t);function t(){return a(this,t),s.apply(this,arguments)}return c(t,[{key:"here",value:function(e){return this.on("presence:subscribed",function(r){e(r.map(function(o){return o.user_info}))}),this}},{key:"joining",value:function(e){return this.on("presence:joining",function(r){return e(r.user_info)}),this}},{key:"whisper",value:function(e,r){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(e),data:r}),this}},{key:"leaving",value:function(e){return this.on("presence:leaving",function(r){return e(r.user_info)}),this}}]),t}(F),m=function(i){u(t,i);var s=l(t);function t(){return a(this,t),s.apply(this,arguments)}return c(t,[{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"listen",value:function(e,r){return this}},{key:"listenToAll",value:function(e){return this}},{key:"stopListening",value:function(e,r){return this}},{key:"subscribed",value:function(e){return this}},{key:"error",value:function(e){return this}},{key:"on",value:function(e,r){return this}}]),t}(S),j=function(i){u(t,i);var s=l(t);function t(){return a(this,t),s.apply(this,arguments)}return c(t,[{key:"whisper",value:function(e,r){return this}}]),t}(m),X=function(i){u(t,i);var s=l(t);function t(){return a(this,t),s.apply(this,arguments)}return c(t,[{key:"here",value:function(e){return this}},{key:"joining",value:function(e){return this}},{key:"whisper",value:function(e,r){return this}},{key:"leaving",value:function(e){return this}}]),t}(m),T=function(){function i(s){a(this,i),this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},broadcaster:"pusher",csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(s),this.connect()}return c(i,[{key:"setOptions",value:function(t){this.options=P(this._defaultOptions,t);var n=this.csrfToken();return n&&(this.options.auth.headers["X-CSRF-TOKEN"]=n,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=n),n=this.options.bearerToken,n&&(this.options.auth.headers.Authorization="Bearer "+n,this.options.userAuthentication.headers.Authorization="Bearer "+n),t}},{key:"csrfToken",value:function(){var t;return typeof window<"u"&&window.Laravel&&window.Laravel.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:typeof document<"u"&&typeof document.querySelector=="function"&&(t=document.querySelector('meta[name="csrf-token"]'))?t.getAttribute("content"):null}}]),i}(),Q=function(i){u(t,i);var s=l(t);function t(){var n;return a(this,t),n=s.apply(this,arguments),n.channels={},n}return c(t,[{key:"connect",value:function(){typeof this.options.client<"u"?this.pusher=this.options.client:this.options.Pusher?this.pusher=new this.options.Pusher(this.options.key,this.options):this.pusher=new Pusher(this.options.key,this.options)}},{key:"signin",value:function(){this.pusher.signin()}},{key:"listen",value:function(e,r,o){return this.channel(e).listen(r,o)}},{key:"channel",value:function(e){return this.channels[e]||(this.channels[e]=new g(this.pusher,e,this.options)),this.channels[e]}},{key:"privateChannel",value:function(e){return this.channels["private-"+e]||(this.channels["private-"+e]=new M(this.pusher,"private-"+e,this.options)),this.channels["private-"+e]}},{key:"encryptedPrivateChannel",value:function(e){return this.channels["private-encrypted-"+e]||(this.channels["private-encrypted-"+e]=new U(this.pusher,"private-encrypted-"+e,this.options)),this.channels["private-encrypted-"+e]}},{key:"presenceChannel",value:function(e){return this.channels["presence-"+e]||(this.channels["presence-"+e]=new D(this.pusher,"presence-"+e,this.options)),this.channels["presence-"+e]}},{key:"leave",value:function(e){var r=this,o=[e,"private-"+e,"private-encrypted-"+e,"presence-"+e];o.forEach(function(h,v){r.leaveChannel(h)})}},{key:"leaveChannel",value:function(e){this.channels[e]&&(this.channels[e].unsubscribe(),delete this.channels[e])}},{key:"socketId",value:function(){return this.pusher.connection.socket_id}},{key:"disconnect",value:function(){this.pusher.disconnect()}}]),t}(T),V=function(i){u(t,i);var s=l(t);function t(){var n;return a(this,t),n=s.apply(this,arguments),n.channels={},n}return c(t,[{key:"connect",value:function(){var e=this,r=this.getSocketIO();return this.socket=r(this.options.host,this.options),this.socket.on("reconnect",function(){Object.values(e.channels).forEach(function(o){o.subscribe()})}),this.socket}},{key:"getSocketIO",value:function(){if(typeof this.options.client<"u")return this.options.client;if(typeof io<"u")return io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}},{key:"listen",value:function(e,r,o){return this.channel(e).listen(r,o)}},{key:"channel",value:function(e){return this.channels[e]||(this.channels[e]=new q(this.socket,e,this.options)),this.channels[e]}},{key:"privateChannel",value:function(e){return this.channels["private-"+e]||(this.channels["private-"+e]=new F(this.socket,"private-"+e,this.options)),this.channels["private-"+e]}},{key:"presenceChannel",value:function(e){return this.channels["presence-"+e]||(this.channels["presence-"+e]=new W(this.socket,"presence-"+e,this.options)),this.channels["presence-"+e]}},{key:"leave",value:function(e){var r=this,o=[e,"private-"+e,"presence-"+e];o.forEach(function(h){r.leaveChannel(h)})}},{key:"leaveChannel",value:function(e){this.channels[e]&&(this.channels[e].unsubscribe(),delete this.channels[e])}},{key:"socketId",value:function(){return this.socket.id}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),t}(T),z=function(i){u(t,i);var s=l(t);function t(){var n;return a(this,t),n=s.apply(this,arguments),n.channels={},n}return c(t,[{key:"connect",value:function(){}},{key:"listen",value:function(e,r,o){return new m}},{key:"channel",value:function(e){return new m}},{key:"privateChannel",value:function(e){return new j}},{key:"encryptedPrivateChannel",value:function(e){return new j}},{key:"presenceChannel",value:function(e){return new X}},{key:"leave",value:function(e){}},{key:"leaveChannel",value:function(e){}},{key:"socketId",value:function(){return"fake-socket-id"}},{key:"disconnect",value:function(){}}]),t}(T),K=function(){function i(s){a(this,i),this.options=s,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}return c(i,[{key:"channel",value:function(t){return this.connector.channel(t)}},{key:"connect",value:function(){this.options.broadcaster=="pusher"?this.connector=new Q(this.options):this.options.broadcaster=="socket.io"?this.connector=new V(this.options):this.options.broadcaster=="null"?this.connector=new z(this.options):typeof this.options.broadcaster=="function"&&(this.connector=new this.options.broadcaster(this.options))}},{key:"disconnect",value:function(){this.connector.disconnect()}},{key:"join",value:function(t){return this.connector.presenceChannel(t)}},{key:"leave",value:function(t){this.connector.leave(t)}},{key:"leaveChannel",value:function(t){this.connector.leaveChannel(t)}},{key:"leaveAllChannels",value:function(){for(var t in this.connector.channels)this.leaveChannel(t)}},{key:"listen",value:function(t,n,e){return this.connector.listen(t,n,e)}},{key:"private",value:function(t){return this.connector.privateChannel(t)}},{key:"encryptedPrivate",value:function(t){return this.connector.encryptedPrivateChannel(t)}},{key:"socketId",value:function(){return this.connector.socketId()}},{key:"registerInterceptors",value:function(){typeof Vue=="function"&&Vue.http&&this.registerVueRequestInterceptor(),typeof axios=="function"&&this.registerAxiosRequestInterceptor(),typeof jQuery=="function"&&this.registerjQueryAjaxSetup(),(typeof Turbo>"u"?"undefined":I(Turbo))==="object"&&this.registerTurboRequestInterceptor()}},{key:"registerVueRequestInterceptor",value:function(){var t=this;Vue.http.interceptors.push(function(n,e){t.socketId()&&n.headers.set("X-Socket-ID",t.socketId()),e()})}},{key:"registerAxiosRequestInterceptor",value:function(){var t=this;axios.interceptors.request.use(function(n){return t.socketId()&&(n.headers["X-Socket-Id"]=t.socketId()),n})}},{key:"registerjQueryAjaxSetup",value:function(){var t=this;typeof jQuery.ajax<"u"&&jQuery.ajaxPrefilter(function(n,e,r){t.socketId()&&r.setRequestHeader("X-Socket-Id",t.socketId())})}},{key:"registerTurboRequestInterceptor",value:function(){var t=this;document.addEventListener("turbo:before-fetch-request",function(n){n.detail.fetchOptions.headers["X-Socket-Id"]=t.socketId()})}}]),i}();const _=document.querySelector(".chat-history-body"),f=document.querySelector(".message-input"),O=document.querySelector(".form-send-message"),L=document.getElementById("online-users"),d=document.getElementById("chat-msg"),A=document.getElementById("online-users-count"),R=document.getElementById("typing");let p=0;function C(i){A&&(A.innerText=i)}function y(){_&&_.scrollTo(0,_.scrollHeight)}window.Echo=new K({broadcaster:"pusher",key:"ecommerceAppKey",cluster:"mt1",wsHost:window.location.hostname,wsPort:6001,forceTLS:!1,disableStats:!0});const b=window.Echo.join("group-chat");b.here(i=>{p=i.length-1,C(p);let s="";i.forEach(function(t){t.id!==+user_id&&(s+=`<li id="user-${t.id}" class="chat-contact-list-item">
                                <a class="d-flex align-items-center">
                                    <div class="flex-shrink-0 avatar avatar-online">
                                        <img src="${t.imgUrl}" alt="Avatar"
                                             class="rounded-circle">
                                    </div>
                                    <div class="chat-contact-info flex-grow-1 ms-3">
                                        <h6 class="chat-contact-name text-truncate m-0">${t.name}</h6>
                                        <p class="chat-contact-status text-truncate mb-0 text-muted">UI/UX Designer</p>
                                    </div>
                                </a>
                            </li>`)}),L.innerHTML+=s}).joining(i=>{p++,C(p),L.innerHTML+=`<li id="user-${i.id}" class="chat-contact-list-item">
                                <a class="d-flex align-items-center">
                                    <div class="flex-shrink-0 avatar avatar-online">
                                        <img src="${i.imgUrl}" alt="Avatar"
                                             class="rounded-circle">
                                    </div>
                                    <div class="chat-contact-info flex-grow-1 ms-3">
                                        <h6 class="chat-contact-name text-truncate m-0">${i.name}</h6>
                                        <p class="chat-contact-status text-truncate mb-0 text-muted">UI/UX Designer</p>
                                    </div>
                                </a>
                            </li>`,d.innerHTML+=`<li class="chat-message">
                                    <div class="d-flex overflow-hidden shadow-lg">
                                        <div class="chat-message-wrapper flex-grow-1">
                                            <div class="chat-message-text">
                                                <p class="mb-0"><span class="text-primary">${i.name}</span> Joined the Chat</p>
                                            </div>
                                        </div>
                                    </div>
                                </li>`,y()}).leaving(i=>{p--,C(p),document.getElementById(`user-${i.id}`).remove(),d.innerHTML+=`<li class="chat-message">
                                    <div class="d-flex overflow-hidden shadow-lg">
                                        <div class="chat-message-wrapper flex-grow-1">
                                            <div class="chat-message-text">
                                                <p class="mb-0"><span class="text-primary">${i.name}</span> left the Chat</p>
                                            </div>
                                        </div>
                                    </div>
                                </li>`,y()}).error(i=>{console.error(i)}).listen("NewMessageEvent",i=>{var s=new Date,t=s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});d.innerHTML+=`<li class="chat-message">
                                    <div class="d-flex overflow-hidden">
                                        <div class="user-avatar flex-shrink-0 me-3">
                                            <div class="avatar avatar-sm">
                                                <img src="${i.msg.user.imgUrl}"
                                                     alt="Avatar" class="rounded-circle">
                                            </div>
                                        </div>
                                        <div class="chat-message-wrapper flex-grow-1">
                                            <div class="chat-message-text">
                                                <small class="my-1 text-primary">
                                                    ${i.msg.user.name}
                                                </small>
                                                <p class="mb-0">${i.msg.body}</p>
                                            </div>
                                            <div class="text-muted mt-1">
                                                <small>${t}</small>
                                            </div>
                                        </div>
                                    </div>
                                </li>`,y()}).listenForWhisper("typing",function(i){R.innerHTML=`<span class="text-primary">${i.name}</span> is typing ...`}).listenForWhisper("stop-typing",function(i){R.innerHTML=""});O&&O.addEventListener("submit",i=>{if(i.preventDefault(),f.value){axios.post("messages",{_token:csrf_token,body:f.value});let t=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});d.innerHTML+=`<li class="chat-message chat-message-right">
                                    <div class="d-flex overflow-hidden">
                                        <div class="chat-message-wrapper flex-grow-1">
                                            <div class="chat-message-text">
                                                <p class="mb-0">${f.value}</p>
                                            </div>
                                            <div class="text-muted mt-1">
                                                <small>${t}</small>
                                            </div>
                                        </div>
                                    </div>
                            </li>`,f.value="",b.whisper("stop-typing"),y()}});f&&f.addEventListener("input",function(i){f.value.length===0?b.whisper("stop-typing"):b.whisper("typing",{name:user_name})});
